(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(1),r=t(15),a=t.n(r),i=t(6),u=t(3),s=function(e){var n=e.handleChange;return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{onChange:n})]})},l=function(e){var n=e.newName,t=e.newNumber,o=e.addPerson,r=e.handleNameChange,a=e.handleNumberChange;return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:o,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:n,onChange:r})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:t,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},d=function(e){var n=e.person;return"".concat(n.name," ").concat(n.number," ")},j=function(e){var n=e.persons,t=e.removePerson,o=e.newFilter,r=e.showAll,a=n.filter((function(e){return e.name.toLowerCase().includes(o.toLowerCase())})),i=r?n.map((function(e){return Object(c.jsxs)("p",{children:[Object(c.jsx)(d,{person:e}),Object(c.jsx)("button",{onClick:function(){return t(e.id)},children:"Delete"})]},e.name)})):a.map((function(e){return Object(c.jsxs)("p",{children:[Object(c.jsx)(d,{person:e}),Object(c.jsx)("button",{onClick:function(){return t(e.id)},children:"Delete"})]},e.name)}));return Object(c.jsx)("div",{children:i})},b=t(4),f=t.n(b),h="https://calm-ocean-21404.herokuapp.com/api/persons",p=function(){return f.a.get(h)},m=function(e){return f.a.post(h,e)},O=function(e){return console.log(e),f.a.delete("".concat(h,"/").concat(e))},x=function(e,n){return f.a.put("".concat(h,"/").concat(e),n)},g={padding:"20px",fontSize:"20px",color:"green",backgroundColor:"lightgrey",border:"3px solid green",borderRadius:"10px"},v={padding:"20px",fontSize:"20px",color:"red",backgroundColor:"lightgrey",border:"3px solid red",borderRadius:"10px"},w=function(e){var n=e.message;return""===n.content?null:"success"===n.type?Object(c.jsx)("p",{style:g,children:n.content}):"failure"===n.type?Object(c.jsx)("p",{style:v,children:n.content}):void 0},y=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),d=Object(u.a)(a,2),b=d[0],f=d[1],h=Object(o.useState)(""),g=Object(u.a)(h,2),v=g[0],y=g[1],C=Object(o.useState)(""),N=Object(u.a)(C,2),k=N[0],S=N[1],P=Object(o.useState)(!0),A=Object(u.a)(P,2),D=A[0],L=A[1],T=Object(o.useState)({content:"",type:""}),z=Object(u.a)(T,2),E=z[0],F=z[1];Object(o.useEffect)((function(){p().then((function(e){r(e.data)})).catch((function(e){console.log("fail")}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(w,{message:E}),Object(c.jsx)(s,{handleChange:function(e){S(e.target.value),t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())}))?L(!1):L(!0)}}),Object(c.jsx)("h2",{children:"Add a new"}),Object(c.jsx)(l,{newName:b,newNumber:v,addPerson:function(e){e.preventDefault();var n={name:b,number:v};if(t.some((function(e){return e.name===b}))){var c=t.find((function(e){return e.name===b})),o=c.id,a=Object(i.a)(Object(i.a)({},c),{},{number:v});window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))&&x(o,a).then((function(e){r(t.map((function(n){return n.id!==o?n:e.data}))),F({content:"Number of ".concat(c.name," is changed"),type:"success"}),setTimeout((function(){F({content:"",type:""})}),5e3),f(""),y("")})).catch((function(e){console.log(e),F({content:"".concat(c.name," is already deleted"),type:"failure"}),setTimeout((function(){F({content:"",type:""})}),5e3),r(t.filter((function(e){return e.id!==o})))}))}else m(n).then((function(e){console.log(e),r(t.concat(e.data)),F({content:"Added ".concat(n.name),type:"success"}),setTimeout((function(){F({content:"",type:""})}),5e3),f(""),y("")})).catch((function(e){console.log("fail")}))},handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){y(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(j,{persons:t,removePerson:function(e){var n=t.filter((function(n){return n.id!==e})),c=t.filter((function(n){return n.id===e}));window.confirm("Delete ".concat(c[0].name,"?"))&&(console.log(n),O(e).then((function(e){r(n),F({content:"".concat(c[0].name," is removed"),type:"success"}),setTimeout((function(){F({content:"",type:""})}),5e3)})).catch((function(e){console.log("fail")})))},newFilter:k,showAll:D})]})};a.a.render(Object(c.jsx)(y,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.9af0f799.chunk.js.map